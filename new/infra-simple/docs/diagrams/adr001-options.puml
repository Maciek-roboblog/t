@startuml adr001-options
!theme plain
skinparam backgroundColor white
skinparam defaultFontName Helvetica
skinparam shadowing false
skinparam roundCorner 8

skinparam rectangle {
    BackgroundColor<<source>> #E3F2FD
    BorderColor<<source>> #1976D2
    BackgroundColor<<target>> #F5F5F5
    BorderColor<<target>> #9E9E9E
}

skinparam storage {
    BackgroundColor #FFCDD2
    BorderColor #E53935
}

skinparam cloud {
    BackgroundColor #FFF9C4
    BorderColor #FBC02D
}

skinparam database {
    BackgroundColor #C8E6C9
    BorderColor #43A047
}

title ADR-001: Model Registry Options

rectangle "LLaMA-Factory" <<source>> as llama

package "Option 1: NFS" {
    storage "NFS\n/storage/models/merged" as nfs
}

package "Option 2: Object Storage" {
    cloud "GCS / S3\ngs://models/" as gcs
}

package "Option 3: MLflow" {
    database "MLflow Registry\nmodels:/merged/prod" as mlflow
}

rectangle "vLLM" <<target>> as vllm

llama --> nfs
llama --> gcs
llama --> mlflow

nfs --> vllm
gcs --> vllm
mlflow --> vllm

note bottom of nfs
  Simple, instant
  No versioning
  Local cluster only
end note

note bottom of gcs
  Multi-cluster
  Object versioning
  Download latency
end note

note bottom of mlflow
  Full versioning
  Audit, lineage
  Complex setup
end note

@enduml
