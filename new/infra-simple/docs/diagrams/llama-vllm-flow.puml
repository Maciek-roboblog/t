@startuml llama-vllm-flow
!theme plain
skinparam backgroundColor white
skinparam defaultFontName Helvetica
skinparam shadowing false
skinparam roundCorner 8

skinparam rectangle {
    BackgroundColor<<llama>> #E3F2FD
    BorderColor<<llama>> #1976D2
    BackgroundColor<<storage>> #E8F5E9
    BorderColor<<storage>> #388E3C
    BackgroundColor<<vllm>> #F3E5F5
    BorderColor<<vllm>> #7B1FA2
}

title LLaMA-Factory -> vLLM Flow

rectangle "LLaMA-Factory (K8s)" <<llama>> {
    component "1. Train" as train
    component "2. Merge" as merge
}

rectangle "NFS Storage" <<storage>> {
    storage "LoRA adapter" as lora
    storage "Merged model" as merged
}

rectangle "vLLM (external)" <<vllm>> {
    component "3. Serve" as serve
}

train -right-> lora
lora -down-> merge
merge -right-> merged
merged -down-> serve

@enduml
