@startuml monitoring-architecture
!theme plain
skinparam backgroundColor white
skinparam defaultFontName Helvetica
skinparam shadowing false
skinparam roundCorner 8

skinparam package {
    BackgroundColor #FAFAFA
    BorderColor #E0E0E0
}

skinparam component {
    BackgroundColor #E3F2FD
    BorderColor #1976D2
}

skinparam database {
    BackgroundColor #E8F5E9
    BorderColor #388E3C
}

title Monitoring Architecture

package "Data Sources" {
    component "Training\n(LLaMA-Factory)" as training
    component "Inference\n(vLLM)" as inference
    component "Kubernetes" as k8s
}

package "Collection" {
    component "MLflow Client" as mlflow_client
    component "Prometheus\nExporters" as exporters
}

package "Storage" {
    database "MLflow DB" as mlflow_db
    database "Prometheus" as prom_db
}

package "Visualization" {
    component "Grafana" as grafana
    component "MLflow UI" as mlflow_ui
    component "LlamaBoard" as llamaboard
}

package "Alerting" {
    component "Alertmanager" as alertmgr
    component "Notifications" as notify
}

' Flow
training --> mlflow_client
training --> exporters
inference --> exporters
k8s --> exporters

mlflow_client --> mlflow_db
exporters --> prom_db

mlflow_db --> mlflow_ui
mlflow_db --> llamaboard
prom_db --> grafana
prom_db --> alertmgr
alertmgr --> notify

@enduml
